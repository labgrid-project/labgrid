#!/usr/bin/make -f

%:
	dh $@ --with python-virtualenv

override_dh_installsystemd:
	dh_installsystemd --name labgrid-coordinator
	dh_installsystemd --name labgrid-exporter

override_dh_shlibs:
	dh_shlibs -l/opt

override_dh_virtualenv:
	dh_virtualenv \
		--package labgrid-venv \
		--install-suffix labgrid \
		--python /usr/bin/python3 \
		--builtin-venv \
		--preinstall 'pip>=21.0.0' \
		--preinstall 'setuptools>=38.0.0' \
		--requirements deb-requirements.txt \
		--extra-pip-arg='--no-binary' \
		--extra-pip-arg='cffi,numpy'

	dh_virtualenv \
		--package labgrid-coordinator-venv \
		--install-suffix labgrid-coordinator \
		--python /usr/bin/python3 \
		--builtin-venv \
		--preinstall 'pip>=21.0.0' \
		--preinstall 'setuptools>=38.0.0' \
		--requirements crossbar-requirements.txt \
		--extra-pip-arg='--no-binary' \
		--extra-pip-arg='cffi,numpy'
