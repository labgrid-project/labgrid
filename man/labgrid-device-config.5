.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "LABGRID-DEVICE-CONFIG" 5 "2017-04-15" "0.0.1" "embedded testing"
.SH NAME
labgrid-device-config \- labgrid test configuration files
.SH SYNOPSIS
.sp
\fB*.yaml\fP
.SH DESCRIPTION
.sp
To integrate a device into a labgrid test, labgrid needs to have a description
of the device and how to access it.
.sp
This manual page is divided into section, each describing one top\-level yaml key.
.SH TARGETS
.sp
The \fBtargets:\fP top key configures a \fBtarget\fP, it\(aqs \fBdrivers\fP and \fBresources\fP\&.
.sp
The top level key is the name of the target, it needs both a \fBresources\fP and
\fBdrivers\fP subkey. The order of instantiated \fBresources\fP and \fBdrivers\fP is
important, since they are parsed as an ordered dictionary and may depend on a
previous driver.
.sp
For a list of available resources and drivers refer to
\fI\%https://labgrid.readthedocs.io/en/latest/configuration.html\fP\&.
.SH OPTIONS
.sp
The \fBoptions:\fP top key configures various options such as the crossbar_url.
.SS OPTIONS KEYS
.INDENT 0.0
.TP
.B \fBcrossbar_url\fP
takes as parameter the URL of the crossbar (coordinator) to connect to.
Defaults to \(aqws://127.0.0.1:20408\(aq.
.TP
.B \fBcrossbar_realm\fP
takes as parameter the realm of the crossbar (coordinator) to connect to.
Defaults to \(aqrealm1\(aq.
.UNINDENT
.SH IMAGES
.sp
The \fBimages:\fP top key provides paths to access preconfigured images to flash
onto the board. The image paths can be either relative to the YAML file or
absolute.
.SS IMAGE KEYS
.sp
The subkeys consist of image names as keys and their paths as values. The
corresponding name can than be used with the appropriate tool found under TOOLS.
.SS IMAGE EXAMPLE
.sp
Two configured images, one for the root filesystem, one for the bootloader:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
images:
  root: \(dqplatform\-v7a/images/root.img\(dq
  boot: \(dqplatform\-v7a/images/barebox.img\(dq
.ft P
.fi
.UNINDENT
.UNINDENT
.SH TOOLS
.sp
The \fBtools:\fP top key provides paths to binaries such as fastboot.
.SS TOOLS KEYS
.INDENT 0.0
.TP
.B \fBdfu\-util\fP
Path to the dfu\-util binary, used by the DFUDriver.
See: \fI\%https://dfu\-util.sourceforge.net/\fP
.TP
.B \fBdpcmd\fP
Path to the dpcmd binary, used by the DediprogFlashDriver.
See: \fI\%https://github.com/DediProgSW/SF100Linux\fP
.TP
.B \fBfastboot\fP
Path to the fastboot binary, used by the AndroidFastbootDriver.
See: \fI\%https://developer.android.com/studio/releases/platform\-tools\fP
.TP
.B \fBflashrom\fP
Path to the flashrom binary, used by the FlashromDriver.
See: \fI\%https://www.flashrom.org/\fP
.TP
.B \fBimx_usb\fP
Path to the imx_usb binary, used by the BDIMXUSBDriver.
See: \fI\%https://github.com/boundarydevices/imx_usb_loader\fP
.TP
.B \fBimx\-usb\-loader\fP
Path to the imx\-usb\-loader binary, used by the IMXUSBDriver.
See: \fI\%https://git.pengutronix.de/cgit/barebox/tree/scripts/imx/imx\-usb\-loader.c\fP
.TP
.B \fBjtagconfig\fP
Path to the jtagconfig binary, used by the QuartusHPSDriver.
See: \fI\%https://www.intel.com/content/www/us/en/docs/programmable/683689/current/jtagconfig.html\fP
.TP
.B \fBmxs\-usb\-loader\fP
Path to the mxs\-usb\-loader binary, used by the MXSUSBDriver.
See: \fI\%https://git.pengutronix.de/cgit/barebox/tree/scripts/mxs\-usb\-loader.c?h=v2017.03.0\fP
.TP
.B \fBopenocd\fP
Path to the openocd binary, used by the OpenOCDDriver.
See: \fI\%https://openocd.org/\fP
.TP
.B \fBquartus_hps\fP
Path to the quartus_hps binary, used by the QuartusHPSDriver.
See: \fI\%https://www.intel.com/content/www/us/en/docs/programmable/683039/22\-3/hps\-flash\-programmer.html\fP
.TP
.B \fBrk\-usb\-loader\fP
Path to the rk\-usb\-loader binary, used by the RKUSBDriver.
See: \fI\%https://git.pengutronix.de/cgit/barebox/tree/scripts/rk\-usb\-loader.c\fP
.TP
.B \fBsd\-mux\-ctrl\fP
Path to the sd\-mux\-ctrl binary, used by the USBSDWireDriver.
See: \fI\%https://git.tizen.org/cgit/tools/testlab/sd\-mux/\fP
.TP
.B \fBsispmctl\fP
Path to the sispmctl binary, used by the SiSPMPowerDriver.
See: \fI\%https://sispmctl.sourceforge.net/\fP
.TP
.B \fBuhubctl\fP
Path to the uhubctl binary, used by the USBPowerDriver.
See: \fI\%https://github.com/mvp/uhubctl\fP
.TP
.B \fBusbmuxctl\fP
Path to the usbmuxctl tool, used by the LXAUSBMuxDriver.
\fI\%https://github.com/linux\-automation/usbmuxctl\fP
.TP
.B \fBusbsdmux\fP
Path to the usbsdmux tool, used by the USBSDMuxDriver.
See: \fI\%https://github.com/linux\-automation/usbsdmux\fP
.TP
.B \fBuuu\-loader\fP
Path to the uuu\-loader binary, used by the UUUDriver.
See: \fI\%https://github.com/nxp\-imx/mfgtools\fP
.TP
.B \fBykushcmd\fP
Path to the ykushcmd binary, used by the YKUSHPowerDriver.
See: \fI\%https://github.com/Yepkit/ykush\fP
.UNINDENT
.sp
The QEMUDriver expects a custom key set via its \fBqemu_bin\fP argument.
See \fI\%https://www.qemu.org/\fP
.SS TOOLS EXAMPLE
.sp
Configure the tool path for \fBimx\-usb\-loader\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
tools:
  imx\-usb\-loader: \(dq/opt/labgrid\-helper/imx\-usb\-loader\(dq
.ft P
.fi
.UNINDENT
.UNINDENT
.SH IMPORTS
.sp
The \fBimports\fP key is a list of files or python modules which
are imported by the environment after loading the configuration.
Paths relative to the configuration file are also supported.
This is useful to load drivers and strategy which are contained in your
testsuite, since the import is done before instantiating the targets.
.SS IMPORTS EXAMPLE
.sp
Import a local \fImyfunctions.py\fP file:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
imports:
  \- myfunctions.py
.ft P
.fi
.UNINDENT
.UNINDENT
.SH PYTHONPATH
.sp
The \fBpythonpath\fP key allows specifying additional directories to be added
to the Python search path (sys.path). This is particularly useful for
including directories that contain Python modules and packages which are
not installed in the standard library or not in the current directory.
Relative paths are resolved relative to the configuration file\(aqs location.
Specifying this option enables the environment to locate and import modules
that are not in the default Python path.
.SS PYTHONPATH EXAMPLE
.sp
Extend the Python search path to include the \fIlibs\fP directory:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pythonpath:
  \- libs
.ft P
.fi
.UNINDENT
.UNINDENT
.SH EXAMPLES
.sp
A sample configuration with one \fImain\fP target, accessible via SerialPort
\fI/dev/ttyUSB0\fP, allowing usage of the ShellDriver:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
targets:
  main:
    resources:
      RawSerialPort:
        port: \(dq/dev/ttyUSB0\(dq
    drivers:
      SerialDriver: {}
      ShellDriver:
        prompt: \(aqroot@\ew+:[^ ]+ \(aq
        login_prompt: \(aq login: \(aq
        username: \(aqroot\(aq
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
A sample configuration with \fIRemotePlace\fP, using the tools configuration and
importing the local \fImystrategy.py\fP file. The \fIMyStrategy\fP strategy is contained
in the loaded local python file:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
targets:
  main:
    resources:
      RemotePlace:
        name: test\-place
    drivers:
      SerialDriver: {}
      ShellDriver:
        prompt: \(aqroot@\ew+:[^ ]+ \(aq
        login_prompt: \(aq login: \(aq
        username: \(aqroot\(aq
      IMXUSBDriver: {}
      MyStrategy: {}
tools:
  imx\-usb\-loader: \(dq/opt/lg\-tools/imx\-usb\-loader\(dq
imports:
  \- mystrategy.py
.ft P
.fi
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
\fBlabgrid\-client\fP(1), \fBlabgrid\-exporter\fP(1)
.SH AUTHOR
Rouven Czerwinski <r.czerwinski@pengutronix.de>

Organization: Labgrid-Project
.SH COPYRIGHT
Copyright (C) 2016-2024 Pengutronix. This library is free software;
you can redistribute it and/or modify it under the terms of the GNU
Lesser General Public License as published by the Free Software
Foundation; either version 2.1 of the License, or (at your option)
any later version.
.\" Generated by docutils manpage writer.
.
